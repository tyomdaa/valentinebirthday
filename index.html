<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Special Note</title>
    <style>
        body { margin: 0; background: #fdfaf6; height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Georgia', serif; overflow: hidden; }
        .polaroid { background: white; padding: 15px 15px 60px 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transform: rotate(-3deg); transition: all 0.5s; position: relative; z-index: 10; width: 280px; }
        .photo-space { width: 100%; aspect-ratio: 1; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 50px; overflow: hidden; filter: grayscale(0%); transition: filter 0.5s; }
        .caption { margin-top: 20px; text-align: center; color: #444; font-style: italic; font-size: 1.2rem; }
        
        #controls { position: absolute; width: 100%; height: 100%; pointer-events: none; }
        button { pointer-events: auto; position: absolute; border: none; cursor: pointer; font-family: inherit; transition: all 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
        
        #yesBtn { bottom: 15%; left: 50%; transform: translateX(-50%); background: #ff4d6d; color: white; padding: 12px 40px; border-radius: 5px; font-size: 1.1rem; z-index: 20; }
        #noBtn { bottom: 8%; left: 50%; transform: translateX(-50%); background: transparent; color: #aaa; text-decoration: underline; font-size: 0.9rem; z-index: 5; }
        
        .petal { position: absolute; background: #ffb3c1; border-radius: 150% 0 150% 0; animation: fall 3s linear infinite; pointer-events: none; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>
    <div class="polaroid" id="card">
        <div class="photo-space" id="photo">ðŸ“¸</div>
        <div class="caption" id="cap">Will you be my Valentine?</div>
    </div>
    <div id="controls">
        <button id="yesBtn" onclick="bloom()">YES</button>
        <button id="noBtn" onclick="runAway()">No</button>
    </div>

    <script>
        let clicks = 0;
        function runAway() {
            const no = document.getElementById('noBtn');
            const yes = document.getElementById('yesBtn');
            const photo = document.getElementById('photo');
            clicks++;
            
            // PHYSICS: Calculate position away from Yes button
            const yesRect = yes.getBoundingClientRect();
            let x, y, dist;
            do {
                x = Math.random() * (window.innerWidth - 100);
                y = Math.random() * (window.innerHeight - 50);
                dist = Math.hypot(x - yesRect.left, y - yesRect.top);
            } while (dist < 150); // Keep at least 150px away

            no.style.left = x + 'px';
            no.style.top = y + 'px';
            no.style.transform = 'none';
            
            // FADE PHOTO
            photo.style.filter = `grayscale(${clicks * 20}%)`;
            photo.innerText = clicks > 3 ? "ðŸ˜¢" : "ðŸ“¸";
        }

        function bloom() {
            document.getElementById('photo').style.filter = "grayscale(0%)";
            document.getElementById('photo').innerText = "ðŸ’–";
            document.getElementById('cap').innerText = "Best Day Ever!";
            document.getElementById('noBtn').style.display = "none";
            for(let i=0; i<30; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.className = 'petal';
                    p.style.left = Math.random() * 100 + 'vw';
                    p.style.width = Math.random() * 15 + 10 + 'px';
                    p.style.height = p.style.width;
                    document.body.appendChild(p);
                }, i * 100);
            }
        }
    </script>
